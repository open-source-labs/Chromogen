{"version":3,"file":"GoogleMobileAds.js","sourceRoot":"","sources":["../../src/android/GoogleMobileAds.ts"],"names":[],"mappings":";;AAGA,SAAgB,uBAAuB,CAAC,MAAkB;;IACxD,yBAAO,MAAM,CAAC,OAAO,0CAAE,MAAM,0CAAE,oBAAoB,mCAAI,IAAI,CAAC;AAC9D,CAAC;AAFD,0DAEC;AAED,SAAgB,0BAA0B,CAAC,MAAkB;;IAC3D,yBAAO,MAAM,CAAC,OAAO,0CAAE,MAAM,0CAAE,uBAAuB,mCAAI,KAAK,CAAC;AAClE,CAAC;AAFD,gEAEC;AAEM,KAAK,UAAU,wBAAwB,CAAC,MAAkB,EAAE,gBAA0B;IAC3F,MAAM,KAAK,GAAG,uBAAuB,CAAC,MAAM,CAAC,CAAC;IAC9C,MAAM,QAAQ,GAAG,0BAA0B,CAAC,MAAM,CAAC,CAAC;IAEpD,IAAI,CAAC,KAAK,EAAE;QACV,OAAO,gBAAgB,CAAC;KACzB;IAED,MAAM,eAAe,GAAG,gBAAgB,CAAC,QAAQ,CAAC,WAAW,CAAC,MAAM,CAClE,CAAC,CAAM,EAAE,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,cAAc,CAAC,KAAK,kBAAkB,CAC1D,CAAC,CAAC,CAAC,CAAC;IAEL,qBAAqB;IACrB,IAAI,qBAAqB,CAAC;IAC1B,MAAM,gBAAgB,GAAG;QACvB,CAAC,EAAE;YACD,cAAc,EAAE,2CAA2C;YAC3D,eAAe,EAAE,KAAK;SACvB;KACF,CAAC;IACF,IAAI,eAAe,CAAC,cAAc,CAAC,WAAW,CAAC,EAAE;QAC/C,qBAAqB,GAAG,eAAe,CAAC,WAAW,CAAC,CAAC,MAAM,CACzD,CAAC,CAAM,EAAE,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,cAAc,CAAC,KAAK,2CAA2C,CACnF,CAAC;QACF,IAAI,qBAAqB,CAAC,MAAM,EAAE;YAChC,qBAAqB,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,eAAe,CAAC,GAAG,KAAK,CAAC;SACxD;aAAM;YACL,eAAe,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;SACrD;KACF;SAAM;QACL,eAAe,CAAC,WAAW,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;KACnD;IAED,sBAAsB;IACtB,IAAI,qBAAqB,CAAC;IAC1B,MAAM,gBAAgB,GAAG;QACvB,CAAC,EAAE;YACD,cAAc,EAAE,uDAAuD;YACvE,eAAe,EAAE,CAAC,QAAQ;SAC3B;KACF,CAAC;IACF,IAAI,eAAe,CAAC,cAAc,CAAC,WAAW,CAAC,EAAE;QAC/C,qBAAqB,GAAG,eAAe,CAAC,WAAW,CAAC,CAAC,MAAM,CACzD,CAAC,CAAM,EAAE,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,cAAc,CAAC,KAAK,uDAAuD,CAC/F,CAAC;QACF,IAAI,qBAAqB,CAAC,MAAM,EAAE;YAChC,qBAAqB,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,eAAe,CAAC,GAAG,CAAC,QAAQ,CAAC;SAC5D;aAAM;YACL,eAAe,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;SACrD;KACF;SAAM;QACL,eAAe,CAAC,WAAW,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;KACnD;IAED,OAAO,gBAAgB,CAAC;AAC1B,CAAC;AAvDD,4DAuDC","sourcesContent":["import { ExpoConfig } from '../Config.types';\nimport { Document } from './Manifest';\n\nexport function getGoogleMobileAdsAppId(config: ExpoConfig) {\n  return config.android?.config?.googleMobileAdsAppId ?? null;\n}\n\nexport function getGoogleMobileAdsAutoInit(config: ExpoConfig) {\n  return config.android?.config?.googleMobileAdsAutoInit ?? false;\n}\n\nexport async function setGoogleMobileAdsConfig(config: ExpoConfig, manifestDocument: Document) {\n  const appId = getGoogleMobileAdsAppId(config);\n  const autoInit = getGoogleMobileAdsAutoInit(config);\n\n  if (!appId) {\n    return manifestDocument;\n  }\n\n  const mainApplication = manifestDocument.manifest.application.filter(\n    (e: any) => e['$']['android:name'] === '.MainApplication'\n  )[0];\n\n  // add application ID\n  let existingApplicationId;\n  const newApplicationId = {\n    $: {\n      'android:name': 'com.google.android.gms.ads.APPLICATION_ID',\n      'android:value': appId,\n    },\n  };\n  if (mainApplication.hasOwnProperty('meta-data')) {\n    existingApplicationId = mainApplication['meta-data'].filter(\n      (e: any) => e['$']['android:name'] === 'com.google.android.gms.ads.APPLICATION_ID'\n    );\n    if (existingApplicationId.length) {\n      existingApplicationId[0]['$']['android:value'] = appId;\n    } else {\n      mainApplication['meta-data'].push(newApplicationId);\n    }\n  } else {\n    mainApplication['meta-data'] = [newApplicationId];\n  }\n\n  // add delay auto init\n  let existingDelayAutoInit;\n  const newDelayAutoInit = {\n    $: {\n      'android:name': 'com.google.android.gms.ads.DELAY_APP_MEASUREMENT_INIT',\n      'android:value': !autoInit,\n    },\n  };\n  if (mainApplication.hasOwnProperty('meta-data')) {\n    existingDelayAutoInit = mainApplication['meta-data'].filter(\n      (e: any) => e['$']['android:name'] === 'com.google.android.gms.ads.DELAY_APP_MEASUREMENT_INIT'\n    );\n    if (existingDelayAutoInit.length) {\n      existingDelayAutoInit[0]['$']['android:value'] = !autoInit;\n    } else {\n      mainApplication['meta-data'].push(newDelayAutoInit);\n    }\n  } else {\n    mainApplication['meta-data'] = [newDelayAutoInit];\n  }\n\n  return manifestDocument;\n}\n"]}
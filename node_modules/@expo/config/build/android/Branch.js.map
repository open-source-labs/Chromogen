{"version":3,"file":"Branch.js","sourceRoot":"","sources":["../../src/android/Branch.ts"],"names":[],"mappings":";;AAGA,SAAgB,eAAe,CAAC,MAAkB;;IAChD,+BAAO,MAAM,CAAC,OAAO,0CAAE,MAAM,0CAAE,MAAM,0CAAE,MAAM,mCAAI,IAAI,CAAC;AACxD,CAAC;AAFD,0CAEC;AAEM,KAAK,UAAU,eAAe,CAAC,MAAkB,EAAE,gBAA0B;IAClF,MAAM,MAAM,GAAG,eAAe,CAAC,MAAM,CAAC,CAAC;IAEvC,IAAI,CAAC,MAAM,EAAE;QACX,OAAO,gBAAgB,CAAC;KACzB;IAED,MAAM,eAAe,GAAG,gBAAgB,CAAC,QAAQ,CAAC,WAAW,CAAC,MAAM,CAClE,CAAC,CAAM,EAAE,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,cAAc,CAAC,KAAK,kBAAkB,CAC1D,CAAC,CAAC,CAAC,CAAC;IAEL,IAAI,wBAAwB,CAAC;IAC7B,MAAM,mBAAmB,GAAG;QAC1B,CAAC,EAAE;YACD,cAAc,EAAE,yBAAyB;YACzC,eAAe,EAAE,MAAM;SACxB;KACF,CAAC;IACF,IAAI,eAAe,CAAC,cAAc,CAAC,WAAW,CAAC,EAAE;QAC/C,wBAAwB,GAAG,eAAe,CAAC,WAAW,CAAC,CAAC,MAAM,CAC5D,CAAC,CAAM,EAAE,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,cAAc,CAAC,KAAK,yBAAyB,CACjE,CAAC;QACF,IAAI,wBAAwB,CAAC,MAAM,EAAE;YACnC,wBAAwB,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,eAAe,CAAC,GAAG,MAAM,CAAC;SAC5D;aAAM;YACL,eAAe,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC;SACxD;KACF;SAAM;QACL,eAAe,CAAC,WAAW,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAC;KACtD;IAED,OAAO,gBAAgB,CAAC;AAC1B,CAAC;AAhCD,0CAgCC","sourcesContent":["import { ExpoConfig } from '../Config.types';\nimport { Document } from './Manifest';\n\nexport function getBranchApiKey(config: ExpoConfig) {\n  return config.android?.config?.branch?.apiKey ?? null;\n}\n\nexport async function setBranchApiKey(config: ExpoConfig, manifestDocument: Document) {\n  const apiKey = getBranchApiKey(config);\n\n  if (!apiKey) {\n    return manifestDocument;\n  }\n\n  const mainApplication = manifestDocument.manifest.application.filter(\n    (e: any) => e['$']['android:name'] === '.MainApplication'\n  )[0];\n\n  let existingBranchApiKeyItem;\n  const newBranchApiKeyItem = {\n    $: {\n      'android:name': 'io.branch.sdk.BranchKey',\n      'android:value': apiKey,\n    },\n  };\n  if (mainApplication.hasOwnProperty('meta-data')) {\n    existingBranchApiKeyItem = mainApplication['meta-data'].filter(\n      (e: any) => e['$']['android:name'] === 'io.branch.sdk.BranchKey'\n    );\n    if (existingBranchApiKeyItem.length) {\n      existingBranchApiKeyItem[0]['$']['android:value'] = apiKey;\n    } else {\n      mainApplication['meta-data'].push(newBranchApiKeyItem);\n    }\n  } else {\n    mainApplication['meta-data'] = [newBranchApiKeyItem];\n  }\n\n  return manifestDocument;\n}\n"]}